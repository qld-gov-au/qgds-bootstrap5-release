"use strict";(()=>{var L=(e,t,o)=>new Promise((n,s)=>{var i=l=>{try{r(o.next(l))}catch(f){s(f)}},c=l=>{try{r(o.throw(l))}catch(f){s(f)}},r=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,c);r((o=o.apply(e,t)).next())});function k(e){try{window.event.cancelBubble=!0,e.stopPropagation()}catch(s){}let t=e.target,n=t.closest(".accordion-group").querySelectorAll(".accordion-button");t.classList.contains("accordion-toggle-btn--closed")?(t.classList.remove("accordion-toggle-btn--closed"),t.classList.add("accordion-toggle-btn--open"),t.textContent="Close all",n.forEach(s=>{s.matches(".collapsed")&&s.click()})):t.classList.contains("accordion-toggle-btn--open")&&(t.classList.remove("accordion-toggle-btn--open"),t.classList.add("accordion-toggle-btn--closed"),t.textContent="Open all",n.forEach(s=>{s.matches(":not(.collapsed)")&&s.click()}))}function x(e){try{window.event.cancelBubble=!0,e.stopPropagation()}catch(n){}let t=e.target.closest(".accordion-group"),o=t.querySelector(".accordion-toggle-btn");o.classList.contains("accordion-toggle-btn--closed")&&t.querySelectorAll(".accordion-button.collapsed").length==0?(o.classList.remove("accordion-toggle-btn--closed"),o.classList.add("accordion-toggle-btn--open"),o.textContent="Close all"):o.classList.contains("accordion-toggle-btn--open")&&t.querySelectorAll(".accordion-button.collapsed").length>0&&(o.classList.remove("accordion-toggle-btn--open"),o.classList.add("accordion-toggle-btn--closed"),o.textContent="Open all")}function E(e){let t=window.location.hash,o=t.substring(1),n=v(t);if(n.length>0){let s=document.querySelector(`#collapse-${o}`),i=!1;if(e&&(e.type==="hashchange"&&e.newURL===e.oldURL||e.type==="click"&&e.target.hash===t)&&e.preventDefault(),s&&s.closest(".accordion-item"))i=s.closest(".accordion-item").querySelector(".accordion-button");else{let c=document.querySelectorAll(".accordion-button");e&&e.type==="click"&&(n=v(e.target.hash)),i=Array.from(c).find(r=>v(r.innerText)===n)}i&&(i.matches(".collapsed")&&i.click(),window.scrollTo(0,i.getBoundingClientRect().top+document.documentElement.scrollTop))}}function v(e){return decodeURI(e.toLowerCase().replace(/[^a-zA-Z0-9/]/g,""))}function T(e){e.preventDefault();let t=e.target,o=t.closest(".video"),n=o.querySelector(".video-embed iframe");if(o.classList.remove("not-ready"),!n.classList.contains("video-custom")){let s=new URL(n.src);s.searchParams.set("autoplay","1"),n.src=s.toString()}n.focus()}function A(e){let t=e.target;t.classList.contains("collapsed")?t.textContent="Show transcript":t.textContent="Hide transcript"}var _=["A","INPUT","BUTTON","SELECT","TEXTAREA","IFRAME","OBJECT","DETAILS"];function j(e){return!e||typeof e!="object"||e.nodeType!==1||e.hasAttribute("disabled")||e.getAttribute("aria-hidden")==="true"?!1:e.hasAttribute("tabindex")||e.hasAttribute("contenteditable")&&e.getAttribute("contenteditable")!=="false"?!0:_.includes(e.tagName)?e.tagName==="A"?!!e.getAttribute("href"):["INPUT","BUTTON","SELECT","TEXTAREA"].includes(e.tagName)?!e.disabled:!0:!1}function z(e){if(!e)return[];let t=e.querySelectorAll("*");return Array.from(t).filter(o=>j(o))}function S(e,t={}){if(!e)throw new Error("Container element is required for focus trap");let{returnFocusElement:o,onEscape:n}=t,s=!1,i=[],c=null;function r(){i=z(e)}function l(a){if(!s||i.length===0)return;let d=i[0],p=i[i.length-1],u=document.activeElement;a.shiftKey?(u===d||!e.contains(u))&&(a.preventDefault(),p.focus()):(u===p||!e.contains(u))&&(a.preventDefault(),d.focus())}function f(a){s&&(a.key==="Escape"||a.key==="Esc")&&(a.preventDefault(),typeof n=="function"&&n())}function g(a){a.key==="Tab"?l(a):(a.key==="Escape"||a.key==="Esc")&&f(a)}function m(){s||(c=document.activeElement,r(),document.addEventListener("keydown",g),i.length>0&&i[0].focus(),s=!0)}function h(){if(!s)return;document.removeEventListener("keydown",g);let a=o||c;a&&typeof a.focus=="function"&&a.focus(),s=!1,c=null}return{activate:m,deactivate:h,update:r,isActive:()=>s}}function B(){let e=document.getElementById("main-nav"),t=document.getElementById("overlay"),o=document.getElementById("burgerBtn"),n=document.getElementById("burgerCloseBtn"),i=["head","main","footer"].map(d=>document.getElementById(d)).filter(Boolean),c=d=>{i.forEach(p=>{d?p.setAttribute("aria-hidden","true"):p.removeAttribute("aria-hidden")})},r=null,l=new Map;function f(){e!=null&&e.classList.contains("show")&&(e.classList.remove("show"),t==null||t.classList.remove("show"),document.body.style.overflow="",c(!1),r&&(r.deactivate(),r=null))}function g(){return!r&&e&&(r=S(e,{returnFocusElement:o,onEscape:()=>{f()}})),r}function m(d,p){if(!l.has(d)){let u=S(d,{returnFocusElement:p,onEscape:()=>{let b=bootstrap.Dropdown.getInstance(p);b&&b.hide()}});l.set(d,u)}return l.get(d)}function h(){let d=e==null?void 0:e.querySelectorAll('[data-bs-toggle="dropdown"]');d==null||d.forEach(p=>{let u=p.closest(".dropdown")||p.closest(".nav-item");if(!u)return;let b=u.querySelector(".dropdown-menu");b&&(p.addEventListener("shown.bs.dropdown",()=>{if(!(window.innerWidth<992)){let W=m(b,p);setTimeout(()=>W.activate(),0)}}),p.addEventListener("hidden.bs.dropdown",()=>{let w=l.get(b);w&&w.isActive()&&w.deactivate()}))})}e&&h(),t==null||t.addEventListener("click",()=>{f()});let a=()=>{let d=window.innerWidth<992;document.querySelectorAll(".navbar a.dropdown-toggle, .navbar a.no-dropdown-toggle").forEach(u=>{if(d){if(u.classList.contains("hasNoLink"))return;u.classList.replace("dropdown-toggle","no-dropdown-toggle"),u.removeAttribute("data-bs-toggle")}else u.classList.replace("no-dropdown-toggle","dropdown-toggle"),u.setAttribute("data-bs-toggle","dropdown")})};window.addEventListener("resize",a),a(),e==null||e.addEventListener("shown.bs.collapse",()=>{setTimeout(()=>{e!=null&&e.classList.contains("show")&&(c(!0),window.innerWidth<992&&g().activate())},0)}),n==null||n.addEventListener("click",()=>{f()})}function I(){let e=5,t=document.querySelector(".breadcrumb");if(!t||t.querySelector(".breadcrumb-toggle"))return;let n=t.querySelectorAll(".breadcrumb-item");if(!n||!n.length)return;let s=t.parentElement;s&&(t.clientWidth>=s.clientWidth&&(e=3),K(n,e))}function K(e,t=5){if(!e||e.length<=t)return;let o=document.createElement("ol");o.classList.add("breadcrumb-vertical"),e.forEach((n,s)=>{var i;if(s>0&&s<e.length-2&&((i=n.querySelector("a"))==null||i.setAttribute("tabindex",-1),o.appendChild(n)),s===0){let c=document.createElement("li"),r=document.createElement("button");c.classList.add("breadcrumb-item","breadcrumb-toggle"),r.setAttribute("aria-label","Expand the breadcrumbs"),r.type="button",r.classList.add("breadcrumb-toggle-link"),r.addEventListener("click",V),c.appendChild(r),n.after(c)}if(s===e.length-1){let c=document.querySelector(".breadcrumb-toggle");if(c){let r=document.createElement("div");r.classList.add("breadcrumb-collapse-wrapper"),r.appendChild(o),c.append(r),c.addEventListener("focusout",l=>{(!l.relatedTarget||!c.contains(l.relatedTarget))&&r.parentElement.classList.remove("expanded")})}}})}function V(e){let t=e.target.closest(".breadcrumb");if(!t){console.log("expandMenu: Breadcrumb does not exist.");return}let o=t.querySelectorAll(".breadcrumb-item");if(!o||!o.length){console.log("expandMenu: Breadcrumb does not exist or is empty.");return}if(e.target.parentElement.classList.toggle("expanded"),e.target.parentElement.classList.contains("expanded")){let s=document.querySelector(".breadcrumb-collapse-wrapper");D(0);let i=s.querySelector("a");i&&i.focus()}document.querySelector(".breadcrumb-toggle-link")&&document.addEventListener("click",C)}function C(e){e.stopPropagation();let t=document.querySelector(".breadcrumb-toggle-link"),o=document.querySelector(".breadcrumb-collapse-wrapper");!o.contains(e.target)&&!t.contains(e.target)&&(o.parentElement.classList.remove("expanded"),document.removeEventListener("click",C),D(-1))}function D(e){let t=document.querySelectorAll(".breadcrumb-collapse-wrapper li");t&&t.forEach(o=>{var n;(n=o.querySelector("a"))==null||n.setAttribute("tabindex",e)})}function y(){var e=document.getElementsByClassName("qld-quick-exit"),t=document.querySelector(".qld-quick-exit-button");e.length>0&&typeof t!="undefined"&&t!=null&&(G(),J())}function G(){let e="https://www.google.com.au/";var t=document.querySelector(".qld-quick-exit-button");t.onclick=function(){return $(e)}}function J(){let e="https://www.google.com.au/";document.addEventListener("keydown",function(t){if(t.keyCode===27)return $(e),t&&(t.preventDefault(),t.returnValue=!1),!1})}function $(e){if(window.open(e,"_blank"),window.location.replace(e),window.history)try{window.history.replaceState({},"","/")}catch(t){t.printStackTrace()}return!1}function M(e){try{e.preventDefault(),e.stopPropagation()}catch(n){console.error("Error in event handling:",n)}let t=document.getElementById("qld-header-search"),o=e.currentTarget;t&&(t.classList.contains("is-open")?(t.classList.remove("is-open"),t.classList.add("is-closed"),o.classList.remove("is-open"),o.classList.add("is-closed"),o.setAttribute("aria-expanded",!1),o.setAttribute("aria-label","Open search"),o.textContent="Search"):(t.classList.remove("is-closed"),t.classList.add("is-open"),o.classList.remove("is-closed"),o.classList.add("is-open"),o.setAttribute("aria-expanded",!0),o.setAttribute("aria-label","Close search"),o.textContent="Close"))}function U(e,t){return L(this,null,function*(){try{let o=yield fetch(e);if(!o.ok)throw new Error("Network response was not ok");return yield o.json()}catch(o){return console.error(`Error fetching ${t}:`,o),{}}})}function q(e,t){let o=t.querySelector(".qld-search-input input"),n=t.querySelector(".suggestions");if(o&&n){let s=e.replace(/\s+/g," ").trim();o.value=s;let i=t.getAttribute("action"),c=o?o.dataset:null,r=new URLSearchParams({query:s,collection:c.collection||"qgov~sp-search",profile:c.profile||"qld",num_ranks:c.numRanks||"10",tiers:c.tiers||"off"}),l=`${i}?${r.toString()}`;window.location.href=l}}function P(e="",t=!1,o){return L(this,null,function*(){let n=o.querySelector(".qld-search-input input"),s=o.querySelector(".suggestions"),i=o.querySelector(".default-suggestions"),c=o.querySelector(".dynamic-suggestions");if(!s||!n)return;if(t){i&&i.classList.remove("d-none"),c&&(c.innerHTML="",c.classList.add("d-none"));return}if(c&&e.length===0){c.innerHTML="",c.classList.add("d-none");return}i==null||i.classList.add("d-none");let r=n?n.dataset:null;if(c){let l=r.suggestions;if(l){let g=r.collection||"qgov~sp-search",m=r.profile||"qld",h=yield U(`${l}?collection=${g}&profile=${m}&fmt=json&alpha=0.5&partial_query=${encodeURIComponent(e)}`,"suggestions");h.length>0?(c.innerHTML=`
        <div class="suggestions-category">
          <ul>${h.slice(0,4).map(a=>`<li><a tabindex="0" href="#">${a.replace(new RegExp(`(${e})`,"gi"),"<strong>$1</strong>")}</a></li>`).join("")}</ul>
        </div>`,c.classList.remove("d-none"),o.querySelector(".suggestions .dynamic-suggestions").addEventListener("click",a=>{let d=a.target.closest("a");d&&(a.preventDefault(),q(d.textContent,o))})):(c.innerHTML="",c.classList.add("d-none"))}let f=r.resultsUrl;if(f){let g=r.collection||"qgov~sp-search",m=r.profile||"qld",h=yield U(`${f}?collection=${g}&profile=${m}&smeta_sfinder_sand=yes&query=${encodeURIComponent(e)}`,"services");if(h.response.resultPacket&&h.response.resultPacket.results.length>0){let a=c.getAttribute("data-view-more"),d=h.response.resultPacket.results.slice(0,4).map(u=>`<li><a tabindex="0" href="${u.liveUrl}">${u.title}</a></li>`).join(""),p=a?`<li><a tabindex="0" href="${a}" class="view-more">View more</a></li>`:"";c.innerHTML+=`
        <div class="suggestions-category feature">
          <strong class="suggestions-category-label d-block">Related services</strong>
          <ul>${d}${p}</ul>
        </div>`,c.classList.remove("d-none"),o.querySelector(".suggestions .dynamic-suggestions").addEventListener("click",u=>{let b=u.target.closest("a");b&&(u.preventDefault(),q(b.textContent,o))})}}}})}function R(e="",t){let o=t.querySelector(".qld-search-input input"),n=o?o.dataset:null,s=e.trim().replace(/\s+/g," "),i=new URLSearchParams({query:s,collection:n.collection||"qgov~sp-search",profile:n.profile||"qld",num_ranks:n.numRanks||"10",tiers:n.tiers||"off"}),c=`${t.getAttribute("action")}?${i.toString()}`;window.location.href=c}window.selectDynamicSuggestion=(e,t)=>q(e,t);function F(){let e=document.querySelector(".back-to-top .qld-dir-link");e&&(e.onclick=function(t){document.body.scrollTop=0,document.documentElement.scrollTop=0,t.preventDefault()})}function N(){let e=document.querySelectorAll(".qld-tabs");function t(o){let n=o.querySelector(".nav-tabs"),s=o.querySelector(".scroll-left"),i=o.querySelector(".scroll-right"),c=n.scrollWidth;if(n){let r=()=>{n.scrollLeft===0?s.classList.remove("show"):s.classList.add("show"),n.scrollLeft+n.clientWidth>=c?i.classList.remove("show"):i.classList.add("show")};n.addEventListener("scroll",r),r(),i.addEventListener("click",()=>{n.scrollBy({top:0,left:200,behavior:"smooth"})}),s.addEventListener("click",()=>{n.scrollBy({top:0,left:-200,behavior:"smooth"})})}}e.forEach(o=>{t(o)}),window.addEventListener("resize",()=>{e.forEach(o=>{t(o)})})}function H(){document.querySelectorAll(".global-alert").forEach(n=>{let s=n.getAttribute("data-id");if(s&&o(`dismissedAlert-${s}`)||n.classList.remove("d-none"),n.querySelector(".btn-close")){let c=()=>{let r=parseInt(n.getAttribute("data-expiry-days"),10);s&&r&&r>0&&t(`dismissedAlert-${s}`,!0,r),n.classList.add("d-none")};n.addEventListener("closed.bs.alert",c),n.addEventListener("btn-closed",c)}});function t(n,s,i){let c=new Date;c.setTime(c.getTime()+i*24*60*60*1e3);let r={value:s,expiry:c.getTime()};localStorage.setItem(n,JSON.stringify(r))}function o(n){let s=localStorage.getItem(n);if(!s)return null;try{let i=JSON.parse(s);return new Date().getTime()>i.expiry?(localStorage.removeItem(n),null):i.value}catch(i){return localStorage.removeItem(n),null}}}function O(){document.querySelectorAll(".qld-skip-links__item").forEach(t=>{let o=t.getAttribute("href"),n=o.replace(/^#/,"");return document.querySelector(o)?!0:(console.error(`A skip link with label "${t.textContent}" is targeting a non-existent element with id "${n}".`),!1)})}window.addEventListener("click",y,!0);window.addEventListener("keydown",y,!0);window.addEventListener("DOMContentLoaded",()=>{(()=>{F(),N(),H();let e=document.getElementById("qld-header-toggle-search-button");e&&e.addEventListener("click",M),document.querySelectorAll(".site-search").forEach(r=>{let l=r.querySelector(".qld-search-input input");if(l){let f;l.addEventListener("input",function(g){clearTimeout(f),f=setTimeout(()=>{let m=g.target.value.trim();P(m,m==="",r)},300)}),r.addEventListener("submit",function(g){g.preventDefault();let m=l.value.trim();R(m,r)})}});let o=document.querySelector("header");if(o){let r=window.location.origin+window.location.pathname;o.setAttribute("data-page-url",r)}B(),I(),window.addEventListener("click",y,!0),window.addEventListener("keydown",y,!0),y(),document.querySelectorAll(".accordion-toggle-btn").forEach(function(r){r.addEventListener("click",k),r.closest(".accordion-group").querySelectorAll(".accordion-button").forEach(function(f){f.addEventListener("click",x)})});let s=document.querySelectorAll('a[href^="#"]');E(),window.onhashchange=E,s.forEach(function(r){r.addEventListener("click",E)}),document.querySelectorAll(".video-thumbnail").forEach(function(r){r.addEventListener("click",T)}),document.querySelectorAll(".video .accordion .accordion-button").forEach(function(r){r.addEventListener("click",A)}),O()})()});})();
//# @qld-gov-au/qgds-bootstrap5 - v2.1.0
//# sourceMappingURL=qld.bootstrap.min.js.map
