"use strict";(()=>{var E=(e,t,o)=>new Promise((r,n)=>{var c=l=>{try{i(o.next(l))}catch(u){n(u)}},s=l=>{try{i(o.throw(l))}catch(u){n(u)}},i=l=>l.done?r(l.value):Promise.resolve(l.value).then(c,s);i((o=o.apply(e,t)).next())});function q(e){try{window.event.cancelBubble=!0,e.stopPropagation()}catch(n){}let t=e.target,r=t.closest(".accordion-group").querySelectorAll(".accordion-button");t.classList.contains("accordion-toggle-btn--closed")?(t.classList.remove("accordion-toggle-btn--closed"),t.classList.add("accordion-toggle-btn--open"),t.textContent="Close all",r.forEach(n=>{n.matches(".collapsed")&&n.click()})):t.classList.contains("accordion-toggle-btn--open")&&(t.classList.remove("accordion-toggle-btn--open"),t.classList.add("accordion-toggle-btn--closed"),t.textContent="Open all",r.forEach(n=>{n.matches(":not(.collapsed)")&&n.click()}))}function k(e){try{window.event.cancelBubble=!0,e.stopPropagation()}catch(r){}let t=e.target.closest(".accordion-group"),o=t.querySelector(".accordion-toggle-btn");o.classList.contains("accordion-toggle-btn--closed")&&t.querySelectorAll(".accordion-button.collapsed").length==0?(o.classList.remove("accordion-toggle-btn--closed"),o.classList.add("accordion-toggle-btn--open"),o.textContent="Close all"):o.classList.contains("accordion-toggle-btn--open")&&t.querySelectorAll(".accordion-button.collapsed").length>0&&(o.classList.remove("accordion-toggle-btn--open"),o.classList.add("accordion-toggle-btn--closed"),o.textContent="Open all")}function w(e){let t=window.location.hash,o=t.substring(1),r=L(t);if(r.length>0){let n=document.querySelector(`#collapse-${o}`),c=!1;if(e&&(e.type==="hashchange"&&e.newURL===e.oldURL||e.type==="click"&&e.target.hash===t)&&e.preventDefault(),n&&n.closest(".accordion-item"))c=n.closest(".accordion-item").querySelector(".accordion-button");else{let s=document.querySelectorAll(".accordion-button");e&&e.type==="click"&&(r=L(e.target.hash)),c=Array.from(s).find(i=>L(i.innerText)===r)}c&&(c.matches(".collapsed")&&c.click(),window.scrollTo(0,c.getBoundingClientRect().top+document.documentElement.scrollTop))}}function L(e){return decodeURI(e.toLowerCase().replace(/[^a-zA-Z0-9/]/g,""))}function T(e){e.preventDefault();let t=e.target,o=t.closest(".video"),r=o.querySelector(".video-embed iframe");if(o.classList.remove("not-ready"),!r.classList.contains("video-custom")){let n=new URL(r.src);n.searchParams.set("autoplay","1"),r.src=n.toString()}r.focus()}function A(e){let t=e.target;t.classList.contains("collapsed")?t.textContent="Show transcript":t.textContent="Hide transcript"}var _=["A","INPUT","BUTTON","SELECT","TEXTAREA","IFRAME","OBJECT","DETAILS"];function j(e){return!e||typeof e!="object"||e.nodeType!==1||e.hasAttribute("disabled")||e.getAttribute("aria-hidden")==="true"?!1:e.hasAttribute("tabindex")||e.hasAttribute("contenteditable")&&e.getAttribute("contenteditable")!=="false"?!0:_.includes(e.tagName)?e.tagName==="A"?!!e.getAttribute("href"):["INPUT","BUTTON","SELECT","TEXTAREA"].includes(e.tagName)?!e.disabled:!0:!1}function z(e){if(!e)return[];let t=e.querySelectorAll("*");return Array.from(t).filter(o=>j(o))}function S(e,t={}){if(!e)throw new Error("Container element is required for focus trap");let{returnFocusElement:o,onEscape:r}=t,n=!1,c=[],s=null;function i(){c=z(e)}function l(a){if(!n||c.length===0)return;let d=c[0],f=c[c.length-1],p=document.activeElement;a.shiftKey?(p===d||!e.contains(p))&&(a.preventDefault(),f.focus()):(p===f||!e.contains(p))&&(a.preventDefault(),d.focus())}function u(a){n&&(a.key==="Escape"||a.key==="Esc")&&(a.preventDefault(),typeof r=="function"&&r())}function g(a){a.key==="Tab"?l(a):(a.key==="Escape"||a.key==="Esc")&&u(a)}function m(){n||(s=document.activeElement,i(),document.addEventListener("keydown",g),c.length>0&&c[0].focus(),n=!0)}function h(){if(!n)return;document.removeEventListener("keydown",g);let a=o||s;a&&typeof a.focus=="function"&&a.focus(),n=!1,s=null}return{activate:m,deactivate:h,update:i,get isActive(){return n}}}var v={xs:0,sm:400,md:700,lg:992,xl:1312};function B(){let e=document.getElementById("main-nav"),t=document.getElementById("overlay"),o=document.getElementById("burgerBtn"),n=["head","main","footer"].map(a=>document.getElementById(a)).filter(Boolean),c=a=>{n.forEach(d=>{a?d.setAttribute("aria-hidden","true"):d.removeAttribute("aria-hidden")})},s=null,i=new Map;function l(){console.log("navbar: ",e),console.log("why?")}function u(){return!s&&e&&(s=S(e,{returnFocusElement:o,onEscape:()=>{l()}})),s}function g(a,d){if(!i.has(a)){let f=S(a,{returnFocusElement:d,onEscape:()=>{let p=bootstrap.Dropdown.getInstance(d);p&&p.hide()}});i.set(a,f)}return i.get(a)}function m(){let a=e==null?void 0:e.querySelectorAll('[data-bs-toggle="dropdown"]');a==null||a.forEach(d=>{let f=d.closest(".dropdown")||d.closest(".nav-item");if(!f)return;let p=f.querySelector(".dropdown-menu");p&&(d.addEventListener("shown.bs.dropdown",()=>{if(!(window.innerWidth<v.lg)){let W=g(p,d);setTimeout(()=>W.activate(),0)}}),d.addEventListener("hidden.bs.dropdown",()=>{let b=i.get(p);b&&b.isActive&&b.deactivate()}))})}e&&m(),t==null||t.addEventListener("click",()=>{l()});let h=()=>{let a=window.innerWidth<v.lg;document.querySelectorAll(".navbar a.dropdown-toggle, .navbar a.no-dropdown-toggle").forEach(f=>{if(a){if(f.classList.contains("hasNoLink"))return;f.classList.replace("dropdown-toggle","no-dropdown-toggle"),f.removeAttribute("data-bs-toggle")}else f.classList.replace("no-dropdown-toggle","dropdown-toggle"),f.setAttribute("data-bs-toggle","dropdown")}),a||l()};window.addEventListener("resize",h),h(),e==null||e.addEventListener("hide.bs.collapse",()=>{t==null||t.classList.remove("show")}),e==null||e.addEventListener("hidden.bs.collapse",()=>{c(!1),s&&(s.deactivate(),s=null)}),e==null||e.addEventListener("shown.bs.collapse",()=>{setTimeout(()=>{e!=null&&e.classList.contains("show")&&(c(!0),window.innerWidth<v.lg&&u().activate())},0)})}function I(){let e=5,t=document.querySelector(".breadcrumb");if(!t||t.querySelector(".breadcrumb-toggle"))return;let r=t.querySelectorAll(".breadcrumb-item");if(!r||!r.length)return;let n=t.parentElement;n&&(t.clientWidth>=n.clientWidth&&(e=3),K(r,e))}function K(e,t=5){if(!e||e.length<=t)return;let o=document.createElement("ol");o.classList.add("breadcrumb-vertical"),e.forEach((r,n)=>{var c;if(n>0&&n<e.length-2&&((c=r.querySelector("a"))==null||c.setAttribute("tabindex",-1),o.appendChild(r)),n===0){let s=document.createElement("li"),i=document.createElement("button");s.classList.add("breadcrumb-item","breadcrumb-toggle"),i.setAttribute("aria-label","Expand the breadcrumbs"),i.type="button",i.classList.add("breadcrumb-toggle-link"),i.addEventListener("click",G),s.appendChild(i),r.after(s)}if(n===e.length-1){let s=document.querySelector(".breadcrumb-toggle");if(s){let i=document.createElement("div");i.classList.add("breadcrumb-collapse-wrapper"),i.appendChild(o),s.append(i),s.addEventListener("focusout",l=>{(!l.relatedTarget||!s.contains(l.relatedTarget))&&i.parentElement.classList.remove("expanded")})}}})}function G(e){let t=e.target.closest(".breadcrumb");if(!t){console.log("expandMenu: Breadcrumb does not exist.");return}let o=t.querySelectorAll(".breadcrumb-item");if(!o||!o.length){console.log("expandMenu: Breadcrumb does not exist or is empty.");return}if(e.target.parentElement.classList.toggle("expanded"),e.target.parentElement.classList.contains("expanded")){let n=document.querySelector(".breadcrumb-collapse-wrapper");D(0);let c=n.querySelector("a");c&&c.focus()}document.querySelector(".breadcrumb-toggle-link")&&document.addEventListener("click",C)}function C(e){e.stopPropagation();let t=document.querySelector(".breadcrumb-toggle-link"),o=document.querySelector(".breadcrumb-collapse-wrapper");!o.contains(e.target)&&!t.contains(e.target)&&(o.parentElement.classList.remove("expanded"),document.removeEventListener("click",C),D(-1))}function D(e){let t=document.querySelectorAll(".breadcrumb-collapse-wrapper li");t&&t.forEach(o=>{var r;(r=o.querySelector("a"))==null||r.setAttribute("tabindex",e)})}function $(){let e=document.querySelectorAll(".date-container"),t=r=>{if(!(r.target.tagName==="INPUT"&&r.target.type==="text"))return;let n=r.target,{value:c,min:s,max:i,pattern:l}=n,u=n.dataset.previousValue||"";if(i&&parseInt(c)>parseInt(i)){n.dataset.previousValue=n.value=i;return}if(s&&parseInt(c)!==0&&c.length>=s.length&&parseInt(c)<parseInt(s)){n.dataset.previousValue=n.value=s;return}if(c&&c!==""&&parseInt(c)!==0&&!RegExp(l).test(c)){n.value=u;return}n.dataset.previousValue=n.value=n.value.trim()},o=r=>{if(!(r.target.tagName==="INPUT"&&r.target.type==="text"))return;let n=r.target,{min:c,max:s}=n,i=n.minLength||0,l=(n.value||"").trim();if(!l||parseInt(l)===0){n.dataset.previousValue=n.value="";return}if(c&&parseInt(l)<c){n.dataset.previousValue=n.value=c.padStart(i,"0");return}if(s&&parseInt(l)>s){n.dataset.previousValue=n.value=s.padStart(i,"0");return}n.dataset.previousValue=n.value=l.padStart(i,"0")};e.forEach(r=>{r.addEventListener("input",t),r.addEventListener("focusout",o)})}function y(){var e=document.getElementsByClassName("qld-quick-exit"),t=document.querySelector(".qld-quick-exit-button");e.length>0&&typeof t!="undefined"&&t!=null&&(J(),Q())}function J(){let e="https://www.google.com.au/";var t=document.querySelector(".qld-quick-exit-button");t.onclick=function(){return M(e)}}function Q(){let e="https://www.google.com.au/";document.addEventListener("keydown",function(t){if(t.keyCode===27)return M(e),t&&(t.preventDefault(),t.returnValue=!1),!1})}function M(e){if(window.open(e,"_blank"),window.location.replace(e),window.history)try{window.history.replaceState({},"","/")}catch(t){t.printStackTrace()}return!1}function U(e){try{e.preventDefault(),e.stopPropagation()}catch(r){console.error("Error in event handling:",r)}let t=document.getElementById("qld-header-search"),o=e.currentTarget;t&&(t.classList.contains("is-open")?(t.classList.remove("is-open"),t.classList.add("is-closed"),o.classList.remove("is-open"),o.classList.add("is-closed"),o.setAttribute("aria-expanded",!1),o.setAttribute("aria-label","Open search"),o.textContent="Search"):(t.classList.remove("is-closed"),t.classList.add("is-open"),o.classList.remove("is-closed"),o.classList.add("is-open"),o.setAttribute("aria-expanded",!0),o.setAttribute("aria-label","Close search"),o.textContent="Close"))}function N(e,t){return E(this,null,function*(){try{let o=yield fetch(e);if(!o.ok)throw new Error("Network response was not ok");return yield o.json()}catch(o){return console.error(`Error fetching ${t}:`,o),{}}})}function x(e,t){let o=t.querySelector(".qld-search-input input"),r=t.querySelector(".suggestions");if(o&&r){let n=e.replace(/\s+/g," ").trim();o.value=n;let c=t.getAttribute("action"),s=o?o.dataset:null,i=new URLSearchParams({query:n,collection:s.collection||"qgov~sp-search",profile:s.profile||"qld",num_ranks:s.numRanks||"10",tiers:s.tiers||"off"}),l=`${c}?${i.toString()}`;window.location.href=l}}function P(e="",t=!1,o){return E(this,null,function*(){let r=o.querySelector(".qld-search-input input"),n=o.querySelector(".suggestions"),c=o.querySelector(".default-suggestions"),s=o.querySelector(".dynamic-suggestions");if(!n||!r)return;if(t){c&&c.classList.remove("d-none"),s&&(s.innerHTML="",s.classList.add("d-none"));return}if(s&&e.length===0){s.innerHTML="",s.classList.add("d-none");return}c==null||c.classList.add("d-none");let i=r?r.dataset:null;if(s){let l=i.suggestions;if(l){let g=i.collection||"qgov~sp-search",m=i.profile||"qld",h=yield N(`${l}?collection=${g}&profile=${m}&fmt=json&alpha=0.5&partial_query=${encodeURIComponent(e)}`,"suggestions");h.length>0?(s.innerHTML=`
        <div class="suggestions-category">
          <ul>${h.slice(0,4).map(a=>`<li><a tabindex="0" href="#">${a.replace(new RegExp(`(${e})`,"gi"),"<strong>$1</strong>")}</a></li>`).join("")}</ul>
        </div>`,s.classList.remove("d-none"),o.querySelector(".suggestions .dynamic-suggestions").addEventListener("click",a=>{let d=a.target.closest("a");d&&(a.preventDefault(),x(d.textContent,o))})):(s.innerHTML="",s.classList.add("d-none"))}let u=i.resultsUrl;if(u){let g=i.collection||"qgov~sp-search",m=i.profile||"qld",h=yield N(`${u}?collection=${g}&profile=${m}&smeta_sfinder_sand=yes&query=${encodeURIComponent(e)}`,"services");if(h.response.resultPacket&&h.response.resultPacket.results.length>0){let a=s.getAttribute("data-view-more"),d=h.response.resultPacket.results.slice(0,4).map(p=>`<li><a tabindex="0" href="${p.liveUrl}">${p.title}</a></li>`).join(""),f=a?`<li><a tabindex="0" href="${a}" class="view-more">View more</a></li>`:"";s.innerHTML+=`
        <div class="suggestions-category feature">
          <strong class="suggestions-category-label d-block">Related services</strong>
          <ul>${d}${f}</ul>
        </div>`,s.classList.remove("d-none"),o.querySelector(".suggestions .dynamic-suggestions").addEventListener("click",p=>{let b=p.target.closest("a");b&&(p.preventDefault(),x(b.textContent,o))})}}}})}function R(e="",t){let o=t.querySelector(".qld-search-input input"),r=o?o.dataset:null,n=e.trim().replace(/\s+/g," "),c=new URLSearchParams({query:n,collection:r.collection||"qgov~sp-search",profile:r.profile||"qld",num_ranks:r.numRanks||"10",tiers:r.tiers||"off"}),s=`${t.getAttribute("action")}?${c.toString()}`;window.location.href=s}window.selectDynamicSuggestion=(e,t)=>x(e,t);function F(){let e=document.querySelector(".back-to-top .qld-dir-link");e&&(e.onclick=function(t){document.body.scrollTop=0,document.documentElement.scrollTop=0,t.preventDefault()})}function H(){let e=document.querySelectorAll(".qld-tabs");function t(o){let r=o.querySelector(".nav-tabs"),n=o.querySelector(".scroll-left"),c=o.querySelector(".scroll-right"),s=r.scrollWidth;if(r){let i=()=>{r.scrollLeft===0?n.classList.remove("show"):n.classList.add("show"),r.scrollLeft+r.clientWidth>=s?c.classList.remove("show"):c.classList.add("show")};r.addEventListener("scroll",i),i(),c.addEventListener("click",()=>{r.scrollBy({top:0,left:200,behavior:"smooth"})}),n.addEventListener("click",()=>{r.scrollBy({top:0,left:-200,behavior:"smooth"})})}}e.forEach(o=>{t(o)}),window.addEventListener("resize",()=>{e.forEach(o=>{t(o)})})}function V(){document.querySelectorAll(".global-alert").forEach(r=>{let n=r.getAttribute("data-id");if(n&&o(`dismissedAlert-${n}`)||r.classList.remove("d-none"),r.querySelector(".btn-close")){let s=()=>{let i=parseInt(r.getAttribute("data-expiry-days"),10);n&&i&&i>0&&t(`dismissedAlert-${n}`,!0,i),r.classList.add("d-none")};r.addEventListener("closed.bs.alert",s),r.addEventListener("btn-closed",s)}});function t(r,n,c){let s=new Date;s.setTime(s.getTime()+c*24*60*60*1e3);let i={value:n,expiry:s.getTime()};localStorage.setItem(r,JSON.stringify(i))}function o(r){let n=localStorage.getItem(r);if(!n)return null;try{let c=JSON.parse(n);return new Date().getTime()>c.expiry?(localStorage.removeItem(r),null):c.value}catch(c){return localStorage.removeItem(r),null}}}function O(){document.querySelectorAll(".qld-skip-links__item").forEach(t=>{let o=t.getAttribute("href"),r=o.replace(/^#/,"");return document.querySelector(o)?!0:(console.error(`A skip link with label "${t.textContent}" is targeting a non-existent element with id "${r}".`),!1)})}window.addEventListener("click",y,!0);window.addEventListener("keydown",y,!0);window.addEventListener("DOMContentLoaded",()=>{F(),H(),V();let e=document.getElementById("qld-header-toggle-search-button");e&&e.addEventListener("click",U),document.querySelectorAll(".site-search").forEach(i=>{let l=i.querySelector(".qld-search-input input");if(l){let u;l.addEventListener("input",function(g){clearTimeout(u),u=setTimeout(()=>{let m=g.target.value.trim();P(m,m==="",i)},300)}),i.addEventListener("submit",function(g){g.preventDefault();let m=l.value.trim();R(m,i)})}});let o=document.querySelector("header");if(o){let i=window.location.origin+window.location.pathname;o.setAttribute("data-page-url",i)}B(),I(),window.addEventListener("click",y,!0),window.addEventListener("keydown",y,!0),y(),document.querySelectorAll(".accordion-toggle-btn").forEach(function(i){i.addEventListener("click",q),i.closest(".accordion-group").querySelectorAll(".accordion-button").forEach(function(u){u.addEventListener("click",k)})});let n=document.querySelectorAll('a[href^="#"]');w(),window.onhashchange=w,n.forEach(function(i){i.addEventListener("click",w)}),document.querySelectorAll(".video-thumbnail").forEach(function(i){i.addEventListener("click",T)}),document.querySelectorAll(".video .accordion .accordion-button").forEach(function(i){i.addEventListener("click",A)}),$(),O()});})();
//# @qld-gov-au/qgds-bootstrap5 - v2.1.0
//# sourceMappingURL=qld.bootstrap.min.js.map
